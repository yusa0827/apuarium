# `git apply` の使い方ガイド

`git apply` は、他者から受け取ったパッチ（`diff` 形式のテキスト）をローカルのリポジトリに適用するコマンドです。ここでは、ブラウザなどでコピーしたパッチをどのように適用するかを説明します。

## 1. パッチをファイルとして保存する
1. 受け取った `diff --git ...` から始まるテキスト全体をコピーします。
2. 任意のテキストエディタで貼り付け、`feature.patch` などのファイル名で保存します。ターミナル上で保存する場合は、次のようにヒアドキュメントを使うこともできます。
   ```bash
   cat <<'PATCH' > feature.patch
   （ここにパッチ内容を貼り付ける）
   PATCH
   ```

## 2. パッチが適用可能か確認する
実際に適用する前にチェックしておくと安全です。
```bash
git apply --check feature.patch
```
エラーが表示されなければ、現在のソースにそのまま適用できます。

## 3. パッチを適用する
```bash
git apply feature.patch
```
コマンドが成功すると、ワーキングツリーに変更が反映されます。`git status` や `git diff` で内容を確認してください。

## 4. 直接パイプで適用する（オプション）
ファイルを保存せずに、クリップボードや URL から直接適用する方法もあります。例：
```bash
# macOS でクリップボードの内容を適用
git apply < <(pbpaste)

# Linux で xclip を利用する場合
git apply < <(xclip -selection clipboard -o)

# 公開 URL から直接適用
git apply <(curl -L https://example.com/patch.diff)
```

## 5. うまくいかないときの対処
- **コンフリクトが発生する**: 対象ファイルがすでに別の変更で書き換わっている可能性があります。最新の変更を取り込むか、手作業で反映してください。
- **行末コードの違い**: Windows でコピー＆ペーストした場合は改行コードが変わることがあります。`git apply --ignore-space-change feature.patch` のようなオプションを試してください。
- **適用後にコンパイルエラー**: パッチ適用後は必ずテストやビルドを実行し、問題がないか確認しましょう。

これで、コピーしたパッチを安全に `git apply` で取り込めます。
